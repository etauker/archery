var transactions = [
	{
		"id" : "cf774e2f-1f5f-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-23 21:25:57",
		"reading" : 8.8,
		"carbohydrates" : 120,
		"insulin_units_short" : 13,
		"insulin_units_long" : 16,
		"meal" : "Before Bed",
		"note" : "Approximate estimate of carbs.",
		"correction_units" : 1,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-23 22:39:57",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-23 23:02:18"
	},
	{
		"id" : "f21d6490-1f45-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-23 19:34:49",
		"reading" : 8.8,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-23 19:34:48",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-23 19:34:48"
	},
	{
		"id" : "81e96608-1f0a-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-23 12:28:19",
		"reading" : null,
		"carbohydrates" : 15,
		"insulin_units_short" : 2,
		"insulin_units_long" : null,
		"meal" : "Lunch",
		"note" : "Cupcake and coffee.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-23 12:29:20",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-23 12:29:20"
	},
	{
		"id" : "2215f381-1f08-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-23 11:53:20",
		"reading" : 6.9,
		"carbohydrates" : 50,
		"insulin_units_short" : 5,
		"insulin_units_long" : null,
		"meal" : "Lunch",
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-23 12:12:20",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-23 12:12:20"
	},
	{
		"id" : "8f0376af-1ee5-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-23 08:04:50",
		"reading" : 12.8,
		"carbohydrates" : null,
		"insulin_units_short" : 2,
		"insulin_units_long" : 12,
		"meal" : "Before Work",
		"note" : null,
		"correction_units" : 2,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-23 08:04:50",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-23 08:04:50"
	},
	{
		"id" : "5987cfc9-1e9a-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-22 23:05:28",
		"reading" : 16.5,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : 16,
		"meal" : "Before Bed",
		"note" : "No correction units as 5 hour have not passed yet.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-22 23:06:28",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-23 23:02:18"
	},
	{
		"id" : "e1071f73-1e7b-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-22 23:05:27",
		"reading" : 13.3,
		"carbohydrates" : 68,
		"insulin_units_short" : 9,
		"insulin_units_long" : null,
		"meal" : "Dinner",
		"note" : "Likely underestimated carbs for lunch.",
		"correction_units" : 2,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-22 19:28:21",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-23 23:02:18"
	},
	{
		"id" : "189e1553-1e47-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-22 13:10:31",
		"reading" : null,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Coffee",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-22 13:10:31",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-22 13:10:31"
	},
	{
		"id" : "a0124c8c-1e40-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-22 12:09:11",
		"reading" : 12.4,
		"carbohydrates" : 40,
		"insulin_units_short" : 6,
		"insulin_units_long" : null,
		"meal" : "Lunch",
		"note" : "Pork chop with potatoes and veg, soup and mousse.",
		"correction_units" : 2,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-22 12:24:12",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-22 12:24:12"
	},
	{
		"id" : "9d413d77-1e3e-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-22 11:30:48",
		"reading" : null,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Coffee",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-22 12:09:48",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-22 12:09:48"
	},
	{
		"id" : "961a2c8b-1e1c-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-22 08:05:12",
		"reading" : 9.8,
		"carbohydrates" : null,
		"insulin_units_short" : 1,
		"insulin_units_long" : 12,
		"meal" : "Before Work",
		"note" : null,
		"correction_units" : 1,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-22 08:06:13",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-22 08:06:13"
	},
	{
		"id" : "2c25d40c-1ddf-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-22 00:45:37",
		"reading" : 3.1,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Few sips of Lucozade.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-22 00:46:36",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-22 00:46:36"
	},
	{
		"id" : "0af5d69f-1dcd-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-21 22:36:49",
		"reading" : 6.2,
		"carbohydrates" : 120,
		"insulin_units_short" : 12,
		"insulin_units_long" : 16,
		"meal" : "Before Bed",
		"note" : "After basketball.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-21 22:36:50",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-21 22:36:50"
	},
	{
		"id" : "186a12fe-1db3-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-21 19:30:06",
		"reading" : 9.9,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Before basketball",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-21 19:31:05",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-21 19:31:05"
	},
	{
		"id" : "2ddd01b8-1da7-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-21 17:43:48",
		"reading" : 16.4,
		"carbohydrates" : 90,
		"insulin_units_short" : 11,
		"insulin_units_long" : null,
		"meal" : "Dinner",
		"note" : "Before basketball.",
		"correction_units" : 2,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-21 18:05:47",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-21 18:05:47"
	},
	{
		"id" : "5b637786-1d8e-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-21 15:07:06",
		"reading" : null,
		"carbohydrates" : 50,
		"insulin_units_short" : 5,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Cake and latte to celebrate a successful project.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-21 15:08:06",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-21 15:08:06"
	},
	{
		"id" : "0368f69b-1d8c-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-21 14:51:19",
		"reading" : null,
		"carbohydrates" : 5,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Coffee",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-21 14:51:20",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-21 14:51:20"
	},
	{
		"id" : "873abbb7-1d77-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-21 12:12:41",
		"reading" : 6.5,
		"carbohydrates" : 30,
		"insulin_units_short" : 3,
		"insulin_units_long" : null,
		"meal" : "Lunch",
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-21 12:24:42",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-21 12:24:42"
	},
	{
		"id" : "4a79464c-1d4c-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-21 07:14:10",
		"reading" : 17.3,
		"carbohydrates" : 5,
		"insulin_units_short" : 3,
		"insulin_units_long" : 12,
		"meal" : "Before Work",
		"note" : "Coffee",
		"correction_units" : 3,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-21 07:15:11",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-21 07:15:11"
	},
	{
		"id" : "a20693c3-1d0e-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 23:53:49",
		"reading" : 8.0,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 23:53:49",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 23:53:49"
	},
	{
		"id" : "6ec745f4-1cfd-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 21:50:40",
		"reading" : null,
		"carbohydrates" : 5,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : "Before Bed",
		"note" : "Coffee.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 21:50:42",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 21:50:42"
	},
	{
		"id" : "1e1c80f5-1cfd-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 21:47:25",
		"reading" : 4.6,
		"carbohydrates" : 25,
		"insulin_units_short" : 1,
		"insulin_units_long" : 16,
		"meal" : "Before Bed",
		"note" : "Ice cream",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 21:48:27",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 21:48:27"
	},
	{
		"id" : "8feb784e-1cf3-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 20:34:01",
		"reading" : 10.9,
		"carbohydrates" : 210,
		"insulin_units_short" : 18,
		"insulin_units_long" : null,
		"meal" : "Dinner",
		"note" : "Pizza and chips",
		"correction_units" : 1,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 20:40:03",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 20:40:03"
	},
	{
		"id" : "0809cf95-1cd7-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 17:13:48",
		"reading" : 8.0,
		"carbohydrates" : 32,
		"insulin_units_short" : 2,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Snickers and biscuits.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 17:15:49",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 17:15:49"
	},
	{
		"id" : "14be2aaa-1cb3-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 12:58:27",
		"reading" : 3.9,
		"carbohydrates" : 20,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : "Breakfast",
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 12:58:28",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 12:58:28"
	},
	{
		"id" : "337f04be-1caa-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 11:54:54",
		"reading" : 3.2,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 11:54:54",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 11:54:54"
	},
	{
		"id" : "331894ff-1ca7-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 11:32:25",
		"reading" : 1.5,
		"carbohydrates" : 25,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 11:33:25",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 11:33:25"
	},
	{
		"id" : "41de70c5-1ca0-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 10:42:42",
		"reading" : 9.0,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : 16,
		"meal" : "Before Work",
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 10:43:43",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 10:43:43"
	},
	{
		"id" : "4794066b-1c55-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-20 01:46:00",
		"reading" : 8.9,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : 16,
		"meal" : "Before Bed",
		"note" : "After a cocktail.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-20 01:47:01",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-20 01:47:01"
	},
	{
		"id" : "45ef305a-1c3d-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-19 22:54:08",
		"reading" : 25.8,
		"carbohydrates" : 60,
		"insulin_units_short" : 6,
		"insulin_units_long" : null,
		"meal" : "Before Bed",
		"note" : "Burrito bowl. After drinking. ",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 22:55:10",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 22:55:10"
	},
	{
		"id" : "1f678463-1c20-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-19 19:25:28",
		"reading" : null,
		"carbohydrates" : 18,
		"insulin_units_short" : 2,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Ice cream",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 19:26:30",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 19:26:30"
	},
	{
		"id" : "c89b9937-1c15-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-19 18:11:29",
		"reading" : 18.0,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 18:12:29",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 18:12:29"
	},
	{
		"id" : "f6ea5542-1c02-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-19 15:57:45",
		"reading" : 10.9,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 15:57:47",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 15:57:47"
	},
	{
		"id" : "04b11185-1c03-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-19 13:57:08",
		"reading" : 4.4,
		"carbohydrates" : 11,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 15:58:10",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 15:58:10"
	},
	{
		"id" : "750a89c0-1be9-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-19 12:54:11",
		"reading" : null,
		"carbohydrates" : 23,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : "Breakfast",
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 12:55:11",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 12:55:11"
	},
	{
		"id" : "5d7a8a48-1be9-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-19 12:53:31",
		"reading" : null,
		"carbohydrates" : 30,
		"insulin_units_short" : 2,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 12:54:32",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 12:54:32"
	},
	{
		"id" : "fb75991b-1be5-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-19 12:29:18",
		"reading" : 9.9,
		"carbohydrates" : 60,
		"insulin_units_short" : 6,
		"insulin_units_long" : 12,
		"meal" : "Breakfast",
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 12:30:19",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 12:30:19"
	},
	{
		"id" : "71b54efe-1b7e-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-18 23:48:25",
		"reading" : 8.9,
		"carbohydrates" : 23,
		"insulin_units_short" : 2,
		"insulin_units_long" : 16,
		"meal" : "Before Bed",
		"note" : "After a basketball match and after a hypo.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-19 00:09:10",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-19 00:09:10"
	},
	{
		"id" : "2aa5c203-1b5c-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-18 20:03:46",
		"reading" : 6.2,
		"carbohydrates" : 120,
		"insulin_units_short" : 10,
		"insulin_units_long" : null,
		"meal" : "Dinner",
		"note" : "Before a match.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-18 20:03:47",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-23 23:02:18"
	},
	{
		"id" : "c1bff5eb-1b39-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-18 15:56:28",
		"reading" : 2.3,
		"carbohydrates" : 10,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Apple",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-18 15:57:29",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-18 15:57:29"
	},
	{
		"id" : "34d4e303-1b1b-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-18 12:18:46",
		"reading" : 9.1,
		"carbohydrates" : 70,
		"insulin_units_short" : 8,
		"insulin_units_long" : null,
		"meal" : "Lunch",
		"note" : null,
		"correction_units" : 1,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-18 12:18:47",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-18 12:18:47"
	},
	{
		"id" : "868c775f-1b0d-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-18 10:40:50",
		"reading" : null,
		"carbohydrates" : 8,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Capucino ",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-18 10:40:51",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-18 10:40:51"
	},
	{
		"id" : "a5d0fbb9-1af2-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-18 07:27:26",
		"reading" : 11.4,
		"carbohydrates" : null,
		"insulin_units_short" : 1,
		"insulin_units_long" : 12,
		"meal" : "Before Work",
		"note" : null,
		"correction_units" : 1,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-18 07:28:27",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-18 07:28:27"
	},
	{
		"id" : "513a438d-1ab8-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-18 00:30:54",
		"reading" : 2.6,
		"carbohydrates" : 20,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Half a can of coke.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-18 00:30:55",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-18 00:30:55"
	},
	{
		"id" : "e69b7564-1aab-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-17 23:00:00",
		"reading" : 4.2,
		"carbohydrates" : 119,
		"insulin_units_short" : 11,
		"insulin_units_long" : 16,
		"meal" : "Before Bed",
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-17 23:02:02",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-17 23:02:02"
	},
	{
		"id" : "43325921-1aa1-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-17 21:45:51",
		"reading" : 5.1,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-17 21:45:53",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-17 21:45:53"
	},
	{
		"id" : "5bc3fe11-1a98-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-17 20:40:07",
		"reading" : 2.3,
		"carbohydrates" : 20,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Half a can of coke.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-17 20:42:08",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-17 20:42:08"
	},
	{
		"id" : "9329e2bd-1a7d-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-17 17:29:23",
		"reading" : 7.0,
		"carbohydrates" : 50,
		"insulin_units_short" : 5,
		"insulin_units_long" : null,
		"meal" : "Dinner",
		"note" : "2 bananas and coffee.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-17 17:30:25",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-17 17:30:25"
	},
	{
		"id" : "9d608102-1a52-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-17 11:44:52",
		"reading" : 7.2,
		"carbohydrates" : 30,
		"insulin_units_short" : 3,
		"insulin_units_long" : null,
		"meal" : "Lunch",
		"note" : null,
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-17 12:22:54",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-17 12:22:54"
	},
	{
		"id" : "32f3313f-1a4d-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-17 11:20:07",
		"reading" : null,
		"carbohydrates" : null,
		"insulin_units_short" : null,
		"insulin_units_long" : null,
		"meal" : null,
		"note" : "Coffee",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-17 11:44:08",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-17 11:44:08"
	},
	{
		"id" : "657360d7-1a2d-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-17 07:55:27",
		"reading" : 6.7,
		"carbohydrates" : 5,
		"insulin_units_short" : null,
		"insulin_units_long" : 12,
		"meal" : "Before Work",
		"note" : "Coffee",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-17 07:56:29",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-17 07:56:29"
	},
	{
		"id" : "5a39bf5c-19ef-11e9-9cb3-06c13e038f7a",
		"date_time" : "2019-01-17 00:12:36",
		"reading" : 6.5,
		"carbohydrates" : 92,
		"insulin_units_short" : 9,
		"insulin_units_long" : 16,
		"meal" : "Before Bed",
		"note" : "After basketball. Had a hypo and Lucozade during training.",
		"correction_units" : null,
		"created_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"created_at" : "2019-01-17 00:32:21",
		"updated_by" : "bfb689ca-e5c5-11e8-8ec4-06fb2c7cffd6",
		"updated_at" : "2019-01-17 00:32:21"
	}
];


var weekdays = [
    'Sunday',
    'Monday',
    'Tuesday',
    'Wednesday',
    'Thursday',
    'Friday',
    'Saturday'
]

var minReading = Infinity;
var maxReading = 0;
var minTime = Infinity;
var maxTime = 0;
var minInsulinUnitsShort = Infinity;
var maxInsulinUnitsShort = 0;
// var readingData = {
//     Monday: [],
//     Tuesday: [],
//     Wednesday: [],
//     Thursday: [],
//     Friday: [],
//     Saturday: [],
//     Sunday: []
// };
var readingData = [];
var readingDataPointColors = [];
var hourlyIntervals = [];
var unitsData = [];
var carbPerUnitCount = 0;
var carbPerUnitTotal = 0;

transactions = transactions
  .map(transaction => {
      if (transaction.date_time) {
          var dateTime = new Date(transaction.date_time);
          transaction.timestamp = dateTime.valueOf();
          transaction.weekday = weekdays[dateTime.getDay()];

          if (transaction.timestamp < minTime) {
              minTime = transaction.timestamp;
          }
          if (transaction.timestamp > maxTime) {
              maxTime = transaction.timestamp;
          }

          if (transaction.reading) {
              //
              // readingData[transaction.weekday].push({
              //     x: dateTime,
              //     y: transaction.reading
              // });
                readingDataPointColors.push(getPointColour(transaction));
                readingData.push({
                    x: dateTime,
                    y: transaction.reading,
                    label: transaction.note
                });

              if (transaction.reading < minReading) {
                  minReading = transaction.reading;
              }
              if (transaction.reading > maxReading) {
                  maxReading = transaction.reading;
              }
          }

          if (transaction.insulin_units_short) {
              let carbs = transaction.carbohydrates || 0;
              let units = transaction.insulin_units_short || 0;

              unitsData.push({
                  x: dateTime,
                  y: carbs/units,
                  label: transaction.note
              });
              carbPerUnitCount++;
              carbPerUnitTotal += carbs/units;

              if (transaction.insulin_units_short < minInsulinUnitsShort) {
                  minInsulinUnitsShort = units;
              }
              if (transaction.insulin_units_short > maxInsulinUnitsShort) {
                  maxInsulinUnitsShort = units;
              }
          }
          return transaction;
      }
  })
  .filter(transaction => transaction);
console.log(transactions);
console.log(readingData);
console.log(readingDataPointColors);

var averageCarbPerUnit = carbPerUnitTotal / carbPerUnitCount;






var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        datasets: [{
            label: 'Readings',
            yAxisID: 'readings',
            xAxisID: 'time',
            data: readingData,
            pointBackgroundColor: readingDataPointColors
        // },
        // {
        //     label: 'Average Carbs per Unit',
        //     yAxisID: 'units',
        //     xAxisID: 'time',
        //     fill: false,
        //     borderColor: 'orange',
        //     data: [{
        //         x: minTime,
        //         y: averageCarbPerUnit
        //     },
        //     {
        //         x: maxTime,
        //         y: averageCarbPerUnit
        //     }]
        // }
        // {
        //     label: 'Average',
        //     yAxisID: 'readings',
        //     xAxisID: 'time',
        //     fill: false,
        //     borderColor: '',
        //     pointBackgroundColor: '',
        //     pointBorderColor: '',
        //     data: readingData['Average']
        // },
        // {
        //     label: 'Carbs / Unit (excluding correction units)',
        //     yAxisID: 'units',
        //     fill: false,
        //     showLine: false,
        //     pointBackgroundColor: 'orange',
        //     pointBorderColor: 'orange',
        //     data: unitsData
        }
        ]
    },
    options: {
        scales: {
            yAxes: [{
                id: 'readings',
                type: 'linear',
                position: 'left',
                scaleLabel: {
                    labelString: 'Readings',
                    display: true
                },
                ticks: {
                    suggestedMax: 20,
                    suggestedMin: 0,
                    stepSize: 4
                }
            // },
            // {
            //     id: 'units',
            //     type: 'linear',
            //     position: 'right',
            //     scaleLabel: {
            //         labelString: 'Units',
            //         display: true
            //     },
            //     ticks: {
            //         suggestedMax: 20,
            //         suggestedMin: 0,
            //         stepSize: 4
            //     },
            //     gridLines: {
            //         display: false
            //     }
            }],
            xAxes: [{
                id: 'time',
                type: 'time',
                distribution: 'linear',
                scaleLabel: {
                    labelString: 'Time',
                    display: true
                },
                time: {
                    unit: 'day',
                    stepSize: 1

                }
                // },
                // time: {
                // }
                // labels: hourlyIntervals
            }]
            // xAxes: [{
            //     // id: 'readings',
            //     type: 'category',
            //     labels: [
            //         'Saturday',
            //         'Sunday',
            //         'Monday',
            //         'Tuesday',
            //         'Wednesday',
            //         'Thursday',
            //         'Friday'
            //     ]
            // }]
                // scaleLabel: {
            //     //     labelString: 'Readings',
            //     //     display: true
            //     // },
            //     // ticks: {
            //     //     suggestedMax: 20,
            //     //     suggestedMin: 0,
            //     //     stepSize: 4
            //     // }
            // }]
        },
        tooltips: {
            callbacks: {
                label: function(tooltipItem, data) {
                    var datasetLabel = data.datasets[tooltipItem.datasetIndex].label || '';
                    let dataset = data.datasets[tooltipItem.datasetIndex];
                    let datapoint = dataset.data[tooltipItem.index];
                    let labelNote = datapoint.label || '';
                    let reading = datapoint.y;
                    let label = '';

                    if (reading) {
                        label = `Reading: ${reading}`
                    }
                    if (labelNote) {
                        label += `, Note: ${labelNote}`
                    }

                    return label;
                }
            }
        }
    }
});

function getPointColour(transaction) {
    let periods = [
	{
		periodId: 'beforeBreakfast',
		periodText: 'Before Breakfast',
		startTime: '06:01',
		endTime: '10:00',
		groups: [
			{
				groupId: 'low',
				groupText: 'Low',
				minValue: 0,
				maxValue: 5.5
			},
			{
				groupId: 'good',
				groupText: 'Good',
				minValue: 5.6,
				maxValue: 7.5
			},
			{
				groupId: 'high',
				groupText: 'High',
				minValue: 7.6,
				maxValue: 14
			},
			{
				groupId: 'veryHigh',
				groupText: 'Very High',
				minValue: 14.1,
				maxValue: 50
			}
		]
	},
	{
		periodId: 'beforeMeals',
		periodText: 'Before Meals',
		startTime: '10:01',
		endTime: '22:00',
		groups: [
			{
				groupId: 'low',
				groupText: 'Low',
				minValue: 0,
				maxValue: 4.5
			},
			{
				groupId: 'good',
				groupText: 'Good',
				minValue: 4.6,
				maxValue: 7.5
			},
			{
				groupId: 'high',
				groupText: 'High',
				minValue: 7.6,
				maxValue: 14
			},
			{
				groupId: 'veryHigh',
				groupText: 'Very High',
				minValue: 14.1,
				maxValue: 50
			}
		]
	},
	{
		periodId: 'beforeBed',
		periodText: 'Before Bed',
		startTime: '22:01',
		endTime: '06:00',
		groups: [
			{
				groupId: 'low',
				groupText: 'Low',
				minValue: 0,
				maxValue: 6.5
			},
			{
				groupId: 'good',
				groupText: 'Good',
				minValue: 6.6,
				maxValue: 8
			},
			{
				groupId: 'high',
				groupText: 'High',
				minValue: 8.1,
				maxValue: 14
			},
			{
				groupId: 'veryHigh',
				groupText: 'Very High',
				minValue: 14.1,
				maxValue: 50
			}
		]
	}];

    let transactionDateTime = new Date(transaction.date_time);
    let matchingPeriod = periods.find(period => {
        console.log(transaction);

        let startDateTime = new Date(transaction.date_time);
        let startHours = period.startTime.substring(0, 2);
        let startMinutes = period.startTime.substring(3, 5);
        startDateTime.setHours(startHours);
        startDateTime.setMinutes(startMinutes);

        let endDateTime = new Date(transaction.date_time);
        let endHours = period.endTime.substring(0, 2);
        let endMinutes = period.endTime.substring(3, 5);
        endDateTime.setHours(endHours);
        endDateTime.setMinutes(endMinutes);

        if (endHours < startHours && transactionDateTime.getHours() < 6) {
            startDateTime.setDate(startDateTime.getDate() - 1);
        }
        else if (endHours < startHours && transactionDateTime.getHours() > 6) {
            endDateTime.setDate(endDateTime.getDate() + 1);
        }

        console.log((transactionDateTime.valueOf() >= startDateTime.valueOf()) && (transactionDateTime.valueOf() <= endDateTime.valueOf()));
        return (transactionDateTime.valueOf() >= startDateTime.valueOf()) && (transactionDateTime.valueOf() <= endDateTime.valueOf());
    });
    console.log(matchingPeriod);
    let reading = transaction.reading;
    let matchingGroup = matchingPeriod.groups.find(group => {
        return (reading >= group.minValue) && (reading <= group.maxValue);
    });

    console.log(matchingGroup);
    if (matchingGroup.groupId === 'low') return 'blue';
    if (matchingGroup.groupId === 'good') return 'green';
    if (matchingGroup.groupId === 'high') return 'orange';
    if (matchingGroup.groupId === 'veryHigh') return 'red';
}
